Basic Router and Switch Instructions (Cisco Devices)
Basic Device Connection
1.
2.
3.
4.

5.

Connect to the device via the console cable (light blue cable) and the use of a terminal
program (Windows Hyperterminal, Putty)
Start the selected program
Set the serial communications port (normally com2)
Connection settings are default:
Bits per second: 9600
Data Bits: 8
Parity: None
Stop Bits: 1
Flow Control: None
Once connected, you will see a connection prompt

Write Erasing Configurations (Switches and Routers)
1. Connect to the device as listed in Basic Device Connection
2. At the prompt, type enable and press <Enter>
3. Type write erase and press <Enter> twice (Once to enter the command and a second time to
confirm). This will remove the startup configuration from the device, but a restart will be
required to load the defaults in after the write erase.
a. For 2950 & 3560 Switches, an additional step to remove the vlan.dat file is necessary to
remove any VLAN configurations located on the flash memory.
i. type show flash: <Enter>
ii. delete flash:vlan.dat <Enter>
4. Finally, reload the default information to the device.
a. At the prompt: reload <Enter><Enter> and select no when asked to save the
configuration.

Password Recovery

Router Password Recovery (2800, 2600, 1200)
At times, a student will place a password on a router and not remove it. In this case, a password
recovery must be completed to allow the device to be used again.
1.
2.
3.
4.

Power off the device.
Power the device back on and use the break command <CTRL> + <C> to stop the boot process
You should see a rommon prompt (‘<’). If you do not, repeat steps 1 and 2.
At the prompt, type confreg 0x2142 <ENTER>. This tells the router to ignore the startup
configuration.
5. Now boot the router, type boot <ENTER>
6. Once booted, complete the Write Erase instructions.
7. Final step, after reload, the device will enter rommon mode again.

However when it reload enter rommon again using the break sequence and type confreg
0x2102, then boot.

Router Password Recovery (2514)
1.
2.
3.
4.
5.
6.
7.
8.

Power off the device.
Power the device back on and use the break command <CTRL> + <C> to stop the boot process
You should see a rommon prompt (‘<’). If you do not, repeat steps 1 and 2.
Type o <Enter> to see the current configuration register
Type o/r 0x2142 <Enter>
Type i to reboot the router and load the IOS
Type enable and then write erase
This step may require multiple reboots. From the putty or terminal window, and send a special
command of break to the session. This should put you in configure terminal mode (i.e.
rommon). If it does not, reboot and send the break again. Once in the correct mode, type
config-register 0x2102 <Enter>.
9. Save the configuration and reload by issuing the commands:
Copy running-config startup-config <Enter>
Reboot <Enter>

Switch Password Recovery (2950, 3560)
1.
2.
3.
4.

Connect to the device via the console port.
Push in and hold the mode button to power cycle the switch until you see the switch: prompt.
Issue the flash_init command.
Use the dir flash command to see all the files on the switch. To remove the configuration and
vlans (and thus the password), remove the following files: config.text, and vlan.dat.
Issue the commands: delete flash:config.text <Enter>
Next, enter:
delete flash:vlan.dat <Enter>

5. Finally, type boot <Enter> and the switch will reset with a default configuration.
More information on the password recovery can be found at
http://cisco.com/en/US/products/sw/iosswrel/ps1831/products_tech_note09186a00801746e6.shtml

Switch Password Recovery (3500XL)
1. Power off the device.
2. Power the device on, while holding the button on the front left of the device. This will put you
in rommon mode (switch:)
3. Type flash_init <Enter>
4. Type dir flash: to find the name of the config file
5. Type rename flash:config.text flash:config.old
6. Type boot

Switch VLAN Creation

3500XL Switches
On the 3500 switches you must create vlans at the interface level, as there is no direct method to
create a vlan.
1.
2.
3.
4.
5.
6.

Type Enable
Type Configure Terminal
Type Interface Fa0/1
Type Switchport access vlan # (# is the number of the vlan you are trying to create)
Type End
Type Show Vlan to confirm your VLAN was created

Saving Configuration to Flash
Depending upon the device, the following commands will be used:
1. Write
2. Copy Run Start
3. Write Memory

Saving Configuration to TFTP Server (configuration backup)
A backup copy of a configuration for a device can be made to allow the saving of a configuration for
reloading or use on a compatible device. You must have a TFTP Server setup and configured for this
option and know the IP address of the TFTP server. On the selected device:
1.
2.
3.
4.

Type Enable
Type Copy Run Tftp
Type in the IP Address or DNS name of the TFTP Server in this case: ex. 192.168.1.150
Type in the name that you wish to save this configuration with (default is switch-config), in
this case: Test-Config
5. Press Enter and it will upload it to your tftp server.

Saving an IOS Image to a TFTP Server
There are times the main operating system for a device may need to be restored or modified to a new version.
The current IOS can be saved to a TFTP server for future use or backup in case of failure. A TFTP server and its
IP address must be configured before this option will be available.

1.
2.
3.
4.

Type Enable
Type Show Version, find the .bin file listed in the output. (Example Below).
Hit the Escape key to exit out of the Show version output.
Type Copy flash:c3500xl-c3h2s-mz.120-5.WC3b.bin Tftp (Replace c3500xl-c3h2s-mz.1205.WC3b.bin with the name of your IOS Image)
5. Type in the IP Address or DNS name of the TFTP Server in this case: 192.168.1.150
6. Type the file name that you wish to save it with (default are shown in [ ] after the question, if
you want the default just hit Enter), in this case: c3500xl-c3h2s-mz.120-5.WC3b.bin
7. Press Enter and it will upload it to your tftp server.

Loading an IOS to a device from a TFTP Server
This option will be used to restore an IOS version to a device or to load a new IOS to a device. A TFTP
server must be configured and the DNS name / IP address known.
1.
2.
3.
4.

Type Enable
Type Copy Tftp Run
Type in the IP Address or DNS name of the TFTP Server in this case: 192.168.1.150
Type in the file name that you wish to pull down, in this case: c3500xl-c3h2s-mz.1205.WC3b.bin
5. Press Enter and it will download it to your flash.

Creating Room on the Device for the IOS (Not Enough Space Error)
When loading a new IOS, the error of Not Enough Space may be received. In this case, the current
image must be removed to provide the space for the new IOS to be installed. Before beginning this,
you will want to save the current IOS to the TFTP server as a precaution. At any time during the
delete process before step 6, the <CTRL>+ <C> combination may be used to cancel the process.
1.
2.
3.
4.
5.

Type Enable
Type Dir flash:
Look for the name of a .bin file
Type delete flash:c3500xl-c3h2s-mz.120-5.WC3b.bin
Hit Enter twice to confirm the name to delete and to confirm the actual deletion.

Determining the VLAN ports of a switch
You may need to determine what ports on a switch are in specific vlans.
1. Type Enable
2. Type Show vlan , the vlans will be listed along the left side and the ports that are associated
with them are directly to the right. Notice in the diagram the Vlan is circled in red and the
ports associated to that vlan are circled in blue.

Creating a Monitor (Mirrored) Port on a switch
Using a monitor port eleviates the need for using a hub to capture traffic. When setting up a monitor
port you can choose to monitor the traffic going over a specific port or a specific VLAN. Which ever
you choose will be used in step X.
1. Type Enable
2. Type Configure Terminal
3. Type Interface FastEthernet 0/1 where FastEthernet 0/1 is the interface you want the traffic
to be sent to. Make sure that the interface your monitoring on is in the same vlan of
whatever port or vlan you are going to be monitoring. Then proceed to either step 4 or 5.
4. Type in Port Monitor FastEthernet 0/5 to monitor the traffic going over port FastEthernet 0/5
5. Type Port Monitor vlan # (where # is the vlan number you want to monitor)

Creation and Setup of a TFTP Server
A TFTP server can easily be created on any Windows Server or desktop using the following
instructions. You will need to download a free program called TFTPD32 to accomplish this task.
1. Download Tftpd32 3.35
2. Install Tftpd32 using the default options and start it running.
3. As shown in the screen shot, all you will need to do, is configure the following:
a. Where the files are stored on the computer / server
b. The IP address of your computer that the device will attempt to contact
4. Once configured, you’re TFTP server is ready to send and receive IOS and configuration files.

